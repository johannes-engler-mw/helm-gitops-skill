apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: vault-backend
  namespace: databases
  labels:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: secrets
    app.kubernetes.io/managed-by: ArgoCD
spec:
  provider:
    vault:
      server: https://vault.example.com
      path: secret
      version: v2
      auth:
        kubernetes:
          mountPath: kubernetes
          role: external-secrets
          serviceAccountRef:
            name: external-secrets-sa

# Alternative: Use AWS Secrets Manager
# ---
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: aws-secrets-manager
#   namespace: databases
# spec:
#   provider:
#     aws:
#       service: SecretsManager
#       region: us-east-1
#       auth:
#         jwt:
#           serviceAccountRef:
#             name: external-secrets-sa

# Alternative: Use GCP Secret Manager
# ---
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: gcp-secret-manager
#   namespace: databases
# spec:
#   provider:
#     gcpsm:
#       projectID: my-gcp-project
#       auth:
#         workloadIdentity:
#           clusterLocation: us-central1
#           clusterName: my-cluster
#           serviceAccountRef:
#             name: external-secrets-sa

# Alternative: Use Azure Key Vault
# ---
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: azure-keyvault
#   namespace: databases
# spec:
#   provider:
#     azurekv:
#       vaultUrl: https://my-vault.vault.azure.net
#       authType: WorkloadIdentity
#       serviceAccountRef:
#         name: external-secrets-sa
